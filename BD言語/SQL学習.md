# データベースとSQL

コマンドプロンプトでデータベースに接続
```
C:\PostgreSQL\15\bin\psql.exe -U postgres -d shop
```

### データベースとは何か

- データベースを管理するコンピュータシステムのことを「 データベース管理システム（ 略してDBMS）」 呼びます。
- リレーショナルデータベースは、「 リレーショナルデータベース管理システム（ 略してRDBMS）」

#### 代表的なRDBMS
- Oracle Database : Oraclre社のRDBMS
- SQL Server : Microsoft社のRDBMS
- DB2 : オープンソースのRDBMS
- MySQL : オープンソースのRDBMS

## RDBMSの一般的なシステム構成

クライアント/サーバー型(C/S型)

##　SQLの文とその種類

###　DDL

- CREATE : データベースやテーブルなどを作成する
- DROP : データベースやテーブルなどを削除する
- ALTER : データベースやテーブルなどの構成を変更する

### DML

- SELECT : テーブルから行を選択する
- INSERT : テーブルに新規行を登録する
- UPDATE : テーブルの行を更新する
- DELETE : テーブルの行を削除する

### DCL

- COMMIT : データベースに対して行なった変更を確定する
- ROLLBACK : データベースに対して行なった変更を取り消す
- GRANT : ユーザに操作の権限を与える
- REVOKE : ユーザから操作の権限を奪う

### SQL文の基本的な記述ルール

#### SQL文の最後に「;」をつける

#### 大文字・小文字は区別されない

#### 定数の書き方には決まりがある

文字列をSQL文の中に記述する場合には'abc'のようにシングルクォーテーションで囲む。数値を記述する場合は必要ない。

#### 単語は半角スペースか改行で区切る

## テーブルの作成

### データベースの作成

```
CREATE DATABASE <データベース名> ;
```

### テーブルの作成

テーブルを作成するCREATE TABLE文
```
CREATE TABLE <テーブル名>
(<列名1><データ型><この列の制約>,
<列名2><データ型><この列の制約>,
<列名3><データ型><この列の制約>,
<列名4><データ型><この列の制約>,

<このテーブルの制約1>,<このテーブルの制約2>,...);
```

### 命名ルール

- 使える文字は半角のアルファベット、数字、アンダーバーのみ。
- 名前の最初は必ず半角のアルファベットを使う。
- 1つのデータベースの中に同じ名前のテーブルを2つ以上作ろうとしたり、1つのテーブル内に同じ名前の列を2つ以上作ろうとしてはいけない。

### データ型の指定

| データ型 | 説明 |
---- | ----
| INTEGER型 | 整数を入れる列に指定するデータ型 |
| CHAR型 | 文字列を入れる列に指定するデータ型 |
| VARCHARA型 | 文字列を入れる列に指定するデータ型(可変長文字列) |
| DATE型 | 日付を入れる列に指定するデータ型 |

### 制約の設定

NOT NULL制約　:　無記入ではいけない

PRIMARY KEY　:　主キー制約、重複できない


## テーブルの削除と変更

### テーブルの削除


```
DROP TABLE <テーブル名>;
```

### テーブル定義の変更(ALTER TABLE文)

```
ALTER TABLE <テーブル名> ADD COLUMN <列の定義>;
```

#### 列を削除するALTER TABLE文

```
ALTER TABLE <テーブル名> DROP COLUMN <列名>;
```

